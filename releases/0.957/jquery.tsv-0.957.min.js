
(function($){function copyOptions(options){return $.extend({__copy:true},options);}
function tsvOptions(options){if(options){if(options.__defaults_applied){return options;}
return $.extend(copyOptions($.tsv.options),options);}
return copyOptions($.tsv.options);}
function tsvColumn(options,index){var opts=tsvOptions(options);return String(opts.columns?opts.columns[index]:index);}
function tsvColumns(options,top){if(options.columns){return options.columns;}else{var cols=Object.keys(top||{}).sort();options.columns=cols;return cols;}}
$.tsv={version:"0.957",options:{formatValue:null,parseValue:null,lineSeparator:"\n",lineSplitter:/\r?\n/,valueSeparator:"\t",valueSplitter:/\t/,arrayToObject:null,objectToArray:null,includeHeader:true,startRownum:0,___defaults_applied:true,extend:$.extend},parseValue:function parseValue(value,options,colnum,colname,rownum){var opts=tsvOptions(options);if(opts.parseValue){return options.parseValue(value,opts,colnum,colname,rownum);}
return value;},formatValue:function formatValue(value,options,rownum,colnum,colname,rownum){var opts=tsvOptions(options);if(opts.formatValue){return options.formatValue(value,opts,colnum,colname,rownum);}
return String(value);},toArray:function toArray(line,options,rownum){var opts=tsvOptions(options);var valueSplitter=opts.valueSplitter;rownum=rownum||0;var colnum=0;function doValue(val){var c=colnum++;return $.tsv.parseValue(val,opts,c,tsvColumn(opts,c),rownum);}
return line.split(valueSplitter).map(doValue);},fromArray:function fromArray(array,options,rownum){var opts=tsvOptions(options);var valueSeparator=opts.valueSeparator;var colnum=0;function doValue(val){var c=colnum++;return $.tsv.formatValue(val,opts,c,tsvColumn(c),rownum);}
return array.map(doValue).join(valueSeparator);},toArrays:function toArrays(tsv,options){var opts=tsvOptions(options);var lines=tsv.split(opts.lineSplitter);var rownum=opts.startRownum||0;return lines.map(function doLine(line){return $.tsv.toArray(line,opts,rownum++);});},fromArrays:function fromArrays(array,options){var opts=tsvOptions(options);var first=array.length?array[0]:[];var cols=tsvColumns(opts,first);var rownum=opts.startRownum||0;var header=opts.includeHeader?$.tsv.fromArray(cols,opts,-1):undefined;function doRow(row){return $.tsv.fromArray(row,opts,rownum++);}
var rtemp=array.map(doRow);if(header){rtemp.unshift(header);}
return rtemp.join(opts.lineSeparator);},arrayToObject:function arrayToObject(row,options,rownum){var opts=tsvOptions(options);rownum=rownum||0;var columns=tsvColumns(opts,row);if(opts.arrayToObject){return opts.arrayToObject(row,opts,rownum);}
var dict={};for(var j=0;j<columns.length;j++){dict[columns[j]]=row[j];}
return dict;},arraysToObjects:function arraysToObjects(array,options){var opts=tsvOptions(options);if(!opts.columns){opts.columns=array.shift();}
var rownum=opts.startRownum||0;return array.map(function convert(row){return $.tsv.arrayToObject(row,opts,rownum++);});},toObjects:function toObjects(tsv,options){var opts=tsvOptions(options);return $.tsv.arraysToObjects($.tsv.toArrays(tsv,opts),opts);},objectToArray:function objectToArray(obj,options,rownum){var opts=tsvOptions(options);var columns=tsvColumns(opts,obj);rownum=rownum||0;if(opts.objectToArray){return opts.objectToArray(obj,opts,rownum);}
var row=[];for(var j=0;j<columns.length;j++){row.push(obj[columns[j]]);}
return row;},objectsToArrays:function objectsToArrays(array,options){var opts=tsvOptions(options);var rownum=options.startRownum;var result=array.map(function convert(obj){return $.tsv.objectToArray(obj,opts,rownum++);});return result;},fromObject:function fromObject(array,options){var opts=tsvOptions(options);return $.tsv.fromArray($.tsv.objectToArray(array,opts),opts);},fromObjects:function fromObjects(array,options){var opts=tsvOptions(options);var first=array.length?array[0]:{};tsvColumns(opts,first);return $.tsv.fromArrays($.tsv.objectsToArrays(array,opts),opts);},extend:$.extend};$.tsv.parseRow=$.tsv.toArray;$.tsv.parseRows=$.tsv.toArrays;$.tsv.parseObject=$.tsv.toObject;$.tsv.parseObjects=$.tsv.toObjects;$.tsv.formatValue=$.tsv.formatValue;$.tsv.formatRow=$.tsv.fromArray;$.tsv.formatRows=$.tsv.fromArrays;$.tsv.formatObject=$.tsv.fromObject;$.tsv.formatObjects=$.tsv.fromObjects;})(jQuery);